<html>

<head>
  <meta charset="UTF-8">
  <title>Walker</title>
</head>

<body>
  <h1>Walker</h1>
  <form id="userinput">
    First Name:
    <br>
    <input type="text" name="firstname">
    <br> Last Name:
    <br>
    <input type="text" name="lastname">
    <br> Phone Number:
    <br> (
    <input type="number" name="area" min="0" max="999" maxlength="3">)
    <input type="number" name="prefix" min="0" max="999" maxlength="3">-
    <input type="number" name="suffix" min="0" max="9999" maxlength="4">
    <br> Emergency Contact Number:
    <br> (
    <input type="number" name="earea" min="0" max="999" maxlength="3">)
    <input type="number" name="eprefix" min="0" max="999" maxlength="3">-
    <input type="number" name="esuffix" min="0" max="9999" maxlength="4">
    <br> Walk Duration:
    <br>
    <select name="dur">
      <option value="10000">10s</option>
      <option value="30000">30s</option>
      <option value="60000">1m</option>
      <option value="300000">5m</option>
      <option value="600000">10m</option>
    </select>
    <br> Follow Up Duration
    <br>
    <select name="followup">
      <option value="10000">10s</option>
      <option value="30000">30s</option>
      <option value="60000">1m</option>
      <option value="300000">5m</option>
      <option value="600000">10m</option>
    </select>
    <br>
    <br>
    <input type="submit" name="submit">
  </form>
  <div id="root"></div>
</body>
<script>
const formToJSON = elements => [].reduce.call(elements, (data, element) => {
  data[element.name] = element.value;
  return data;
}, {});

const handleFormSubmit = event => {
  event.preventDefault();
  const data = formToJSON(form.elements);
  console.log(data);
  fetch('/createuser', {
      method: 'post',
      headers: {
        'Accept': 'application/json, */*',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(data)
    }).then(console.log('done'));
};

const form = document.getElementById('userinput');
form.addEventListener('submit', handleFormSubmit);
</script>

</html>